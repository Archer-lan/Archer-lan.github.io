<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="Lanlan"><meta name="copyright" content="Lanlan"><meta name="generator" content="Hexo 6.0.0"><meta name="theme" content="hexo-theme-yun"><title>Nodom学习 | Blog of Lanlan</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" type="image/png" href="/bitbug_favicon.ico"><link rel="mask-icon" href="/bitbug_favicon.ico" color="#6200ee"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"archer-lan.github.io","root":"/","title":"蓝蓝的小站","version":"1.7.0","mode":"time","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><meta name="description" content="Nodom学习安装后启动方法在文件夹中，使用cli工具初始化 npm run build  打包文件，输出结果在&#x2F;dist目录中 之后安装live-server cmd中输入 live-server  即可查看example中对应的示例文件 引入方式以ES Module的形式引入script文件 &lt;script type&#x3D;&#39;module&#39;&gt; import&amp;#123;nodom,Mo">
<meta property="og:type" content="article">
<meta property="og:title" content="Nodom学习">
<meta property="og:url" content="https://archer-lan.github.io/2022/08/05/Nodom%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Blog of Lanlan">
<meta property="og:description" content="Nodom学习安装后启动方法在文件夹中，使用cli工具初始化 npm run build  打包文件，输出结果在&#x2F;dist目录中 之后安装live-server cmd中输入 live-server  即可查看example中对应的示例文件 引入方式以ES Module的形式引入script文件 &lt;script type&#x3D;&#39;module&#39;&gt; import&amp;#123;nodom,Mo">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="c:/Users/78125/AppData/Roaming/Typora/typora-user-images/image-20220801093030941.png">
<meta property="article:published_time" content="2022-08-05T07:59:43.920Z">
<meta property="article:modified_time" content="2022-08-05T07:53:27.153Z">
<meta property="article:author" content="Lanlan">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:/Users/78125/AppData/Roaming/Typora/typora-user-images/image-20220801093030941.png"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Lanlan"><img width="96" loading="lazy" src="/images/avater.png" alt="Lanlan"><span class="site-author-status" title="天天开心">😭</span></a><div class="site-author-name"><a href="/about/">Lanlan</a></div><a class="site-name" href="/about/site.html">Blog of Lanlan</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">54</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">10</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">0</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&amp;uin=781251187&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Archer-lan" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:lan78125@gmail.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=280461298" title="网易云音乐" target="_blank" style="color:#C10D0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/20745958?spm_id_from=333.1007.0.0" title="哔哩哔哩动画" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Nodom%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">Nodom学习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%90%8E%E5%90%AF%E5%8A%A8%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">安装后启动方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.</span> <span class="toc-text">引入方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97"><span class="toc-number">1.3.</span> <span class="toc-text">模块</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%AE%9A%E4%B9%89"><span class="toc-number">1.3.1.</span> <span class="toc-text">模块定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.3.2.</span> <span class="toc-text">模板</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.3.</span> <span class="toc-text">响应式数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.4.</span> <span class="toc-text">方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.5.</span> <span class="toc-text">生命周期钩子函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%B5%8C%E5%A5%97"><span class="toc-number">1.3.6.</span> <span class="toc-text">模块嵌套</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%88%AB%E5%90%8D"><span class="toc-number">1.3.7.</span> <span class="toc-text">模块别名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%86%99%E6%B3%95"><span class="toc-number">1.4.</span> <span class="toc-text">指令写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%86%99%E6%B3%95"><span class="toc-number">1.5.</span> <span class="toc-text">事件写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%88%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%EF%BC%89"><span class="toc-number">1.6.</span> <span class="toc-text">表达式（响应式数据）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">1.7.</span> <span class="toc-text">事件绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="toc-number">1.7.1.</span> <span class="toc-text">回调函数的参数：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">1.7.2.</span> <span class="toc-text">事件修饰符</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4"><span class="toc-number">1.8.</span> <span class="toc-text">指令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Model-%E6%8C%87%E4%BB%A4"><span class="toc-number">1.8.1.</span> <span class="toc-text">Model 指令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Filed%E6%8C%87%E4%BB%A4"><span class="toc-number">1.8.2.</span> <span class="toc-text">Filed指令</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%97%E8%A1%A8"><span class="toc-number">1.9.</span> <span class="toc-text">列表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%87%E6%BB%A4%E6%95%B0%E7%BB%84"><span class="toc-number">1.9.1.</span> <span class="toc-text">自定义过滤数组</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9FDOM"><span class="toc-number">1.10.</span> <span class="toc-text">虚拟DOM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-number">1.11.</span> <span class="toc-text">属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92"><span class="toc-number">1.12.</span> <span class="toc-text">数据传递</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E4%BC%A0%E9%80%92"><span class="toc-number">1.12.1.</span> <span class="toc-text">反向传递</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%B1%E5%B1%82%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92"><span class="toc-number">1.12.2.</span> <span class="toc-text">深层数据传递</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Props%E4%B8%AD%E7%9A%84template"><span class="toc-number">1.12.3.</span> <span class="toc-text">Props中的template</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD"><span class="toc-number">1.13.</span> <span class="toc-text">插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="toc-number">1.13.1.</span> <span class="toc-text">默认插槽</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">1.13.2.</span> <span class="toc-text">命名插槽</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E6%B8%B2%E6%9F%93%E6%8F%92%E6%A7%BD"><span class="toc-number">1.13.3.</span> <span class="toc-text">内部渲染插槽</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%EF%BC%88Model%EF%BC%89"><span class="toc-number">1.14.</span> <span class="toc-text">数据模型（Model）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Model%E4%B8%8E%E6%A8%A1%E5%9D%97%E6%B8%B2%E6%9F%93"><span class="toc-number">1.14.1.</span> <span class="toc-text">Model与模块渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#set-%E6%96%B9%E6%B3%95"><span class="toc-number">1.14.1.1.</span> <span class="toc-text">$set()方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#watch"><span class="toc-number">1.14.1.2.</span> <span class="toc-text">$watch()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93"><span class="toc-number">1.15.</span> <span class="toc-text">渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Props%E7%9A%84%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-number">1.15.0.1.</span> <span class="toc-text">Props的副作用</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E7%9A%84%EF%BC%8C%E5%9C%A8Props%E4%B8%AD%EF%BC%8C%E5%AF%B9%E4%BA%8E%E4%BC%A0%E9%80%92Object%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%EF%BC%8CNodom%E4%BC%9A%E5%B0%86%E8%AF%A5%E6%A8%A1%E5%9D%97%E9%BB%98%E8%AE%A4%E4%B8%BA%E6%95%B0%E6%8D%AE%E6%94%B9%E5%8F%98%E3%80%82"><span class="toc-number">1.15.0.2.</span> <span class="toc-text">特殊的，在Props中，对于传递Object类型的数据，每次渲染，Nodom会将该模块默认为数据改变。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8D%95%E8%AF%8D%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%9D%97"><span class="toc-number">1.15.0.3.</span> <span class="toc-text">单词渲染模块</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSS%E6%94%AF%E6%8C%81"><span class="toc-number">1.16.</span> <span class="toc-text">CSS支持</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#scope%E5%B1%9E%E6%80%A7"><span class="toc-number">1.16.0.1.</span> <span class="toc-text">scope属性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cache"><span class="toc-number">1.17.</span> <span class="toc-text">Cache</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E4%B8%8E%E8%BF%87%E6%B8%A1"><span class="toc-number">1.18.</span> <span class="toc-text">动画与过渡</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5-x2F-%E7%A6%BB%E5%BC%80%E5%8A%A8%E7%94%BB"><span class="toc-number">1.18.1.</span> <span class="toc-text">进入&#x2F;离开动画</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"><span class="toc-number">1.19.</span> <span class="toc-text">钩子函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%87%E6%B8%A1-x2F-%E5%8A%A8%E7%94%BB%E6%8E%A7%E5%88%B6%E5%8F%82%E6%95%B0"><span class="toc-number">1.19.1.</span> <span class="toc-text">过渡&#x2F;动画控制参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E5%88%AB%E9%85%8D%E7%BD%AEenter-x2F-leave"><span class="toc-number">1.19.2.</span> <span class="toc-text">分别配置enter&#x2F;leave</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-number">1.20.</span> <span class="toc-text">路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1"><span class="toc-number">1.20.1.</span> <span class="toc-text">创建路由</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC"><span class="toc-number">1.20.2.</span> <span class="toc-text">路由跳转</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%B5%8C%E5%A5%97"><span class="toc-number">1.20.3.</span> <span class="toc-text">路由嵌套</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%80%BC%E3%80%81%E8%B7%AF%E7%94%B1%E4%BA%8B%E4%BB%B6%E7%AD%89%E5%8A%9F%E8%83%BD"><span class="toc-number">1.20.4.</span> <span class="toc-text">使用路由传值、路由事件等功能</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1"><span class="toc-number">1.21.</span> <span class="toc-text">默认路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%A0%81"><span class="toc-number">1.21.1.</span> <span class="toc-text">浏览器代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BB%A3%E7%A0%81"><span class="toc-number">1.21.2.</span> <span class="toc-text">服务器代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%80%81"><span class="toc-number">2.</span> <span class="toc-text">生态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NodomUI"><span class="toc-number">2.1.</span> <span class="toc-text">NodomUI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kayaks"><span class="toc-number">2.2.</span> <span class="toc-text">Kayaks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nodom-VsCode%E6%8F%92%E4%BB%B6"><span class="toc-number">2.3.</span> <span class="toc-text">Nodom VsCode插件</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://Archer-lan.github.io/2022/08/05/Nodom%E5%AD%A6%E4%B9%A0/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Lanlan"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Blog of Lanlan"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Nodom学习</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2022-08-05 15:59:43" itemprop="dateCreated datePublished" datetime="2022-08-05T15:59:43+08:00">2022-08-05</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/Nodom%E5%AD%A6%E4%B9%A0/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Nodom学习</span></a></span></span></div><div class="post-author"><div class="author-avatar"><img src="https://www.gravatar.com/avatar/8d43d7964b8cab986fa862a4518075a2?s=20&amp;d=https%3A%2F%2Fcdn.jsdelivr.net%2Fgh%2FYunYouJun%2Fcdn%2Fimg%2Favatar%2Fnone.jpg"></div><span class="author-name">Lanlan</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><h3 id="Nodom学习"><a href="#Nodom学习" class="headerlink" title="Nodom学习"></a>Nodom学习</h3><h4 id="安装后启动方法"><a href="#安装后启动方法" class="headerlink" title="安装后启动方法"></a>安装后启动方法</h4><p>在文件夹中，使用cli工具初始化</p>
<pre class="language-none"><code class="language-none">npm run build</code></pre>

<p>打包文件，输出结果在&#x2F;dist目录中</p>
<p>之后安装live-server</p>
<p>cmd中输入</p>
<pre class="language-none"><code class="language-none">live-server</code></pre>

<p>即可查看example中对应的示例文件</p>
<h4 id="引入方式"><a href="#引入方式" class="headerlink" title="引入方式"></a>引入方式</h4><p>以ES Module的形式引入script文件</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>module<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span><span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../dist/nodom.esm.js'</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>渲染dom需要在html中添加标签，将此标签标记为渲染的容器。</p>
<p>此标签作为渲染的根节点，nodom传入的模块类都将插入此根节点。</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>app<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span><span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../dist/nodom.esm.js'</span>
<span class="token keyword">class</span> <span class="token class-name">Module1</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
		<span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
			<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
				&lt;div>
					&#123;&#123;msg&#125;&#125;
				&lt;/div>
			</span><span class="token template-punctuation string">`</span></span>
		<span class="token punctuation">&#125;</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
			<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
				<span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'Hello World'</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token function">nodom</span><span class="token punctuation">(</span>Module1<span class="token punctuation">,</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h4 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h4><h5 id="模块定义"><a href="#模块定义" class="headerlink" title="模块定义"></a>模块定义</h5><p>模块的定义需要继承Nodom提供的模块基类Module.</p>
<h5 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h5><p>同时可以通过template（）方法添加模板代码，描述模板视图。</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">class</span> <span class="token class-name">ModuleA</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token comment">//     template(props) &#123;</span>
    <span class="token comment">//         return `</span>
    <span class="token comment">//     &lt;div></span>
    <span class="token comment">//         &lt;span>This is ModuleA&lt;/span></span>
    <span class="token comment">//     &lt;/div>`</span>
    <span class="token comment">//     &#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>还可以通过data方法在模块中添加响应式的数据。</p>
<h5 id="响应式数据"><a href="#响应式数据" class="headerlink" title="响应式数据"></a>响应式数据</h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
		<span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'Hello World'</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>我们将响应式处理后的对象称之为model，model为原始数据对象进行代理拦截的Proxy对象。</p>
<h5 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h5><p>在模块中定义方法，用于逻辑处理。</p>
<p>应用于事件的方法。</p>
<p>模板中的事件定义，通常以模块方法名传入（参考event），默认参数依次为Model，时间触发的虚拟Dom，Nodom封装事件NEvent，原生事件对象Event。</p>
<p>this在方法指向模块实例对象。</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
    <span class="token keyword">class</span> <span class="token class-name">Module1</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//Nodom会将模板代码编译成虚拟Dom树，再渲染至真实Dom上</span>
        <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;div>
                    &lt;span>&#123;&#123;msg&#125;&#125;&lt;/span>
                    &lt;button e-click="change">修改数据&lt;/button>
                &lt;/div>
            </span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//定义模块需要的数据</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'Hello World'</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//自定义模块方法</span>
        <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">model<span class="token punctuation">,</span>Vdom<span class="token punctuation">,</span>Nevent<span class="token punctuation">,</span>event</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            model<span class="token punctuation">.</span>msg<span class="token operator">=</span><span class="token string">'nodom3'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">nodom</span><span class="token punctuation">(</span>Module1<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h5 id="生命周期钩子函数"><a href="#生命周期钩子函数" class="headerlink" title="生命周期钩子函数"></a>生命周期钩子函数</h5><table>
<thead>
<tr>
<th align="center">事件名</th>
<th align="center">描述</th>
<th align="center">参数</th>
<th align="center">this指向</th>
</tr>
</thead>
<tbody><tr>
<td align="center">onBeforeRender</td>
<td align="center">渲染前执行事件</td>
<td align="center">模块model</td>
<td align="center">当前模块实例</td>
</tr>
<tr>
<td align="center">onBeforeFirstRender</td>
<td align="center">首次渲染前执行事件(只执行1次)</td>
<td align="center">模块model</td>
<td align="center">当前模块实例</td>
</tr>
<tr>
<td align="center">onFirstRender</td>
<td align="center">执行首次渲染后事件（只执行1次）</td>
<td align="center">模块model</td>
<td align="center">当前模块实例</td>
</tr>
<tr>
<td align="center">onRender</td>
<td align="center">执行每次渲染后事件</td>
<td align="center">模块model</td>
<td align="center">当前模块实例</td>
</tr>
<tr>
<td align="center">onMount</td>
<td align="center">挂载到html dom后执行事件</td>
<td align="center">模块model</td>
<td align="center">当前模块实例</td>
</tr>
<tr>
<td align="center">unUnmount</td>
<td align="center">从html卸载后执行事件</td>
<td align="center">模块model</td>
<td align="center">当前模块实例</td>
</tr>
<tr>
<td align="center">onCompile</td>
<td align="center">编译后执行事件</td>
<td align="center">模块model</td>
<td align="center">当前模块实例</td>
</tr>
</tbody></table>
<p>注意：</p>
<p>所有的模板都需要一个<code>&lt;div&gt;</code>根节点</p>
<h5 id="模块嵌套"><a href="#模块嵌套" class="headerlink" title="模块嵌套"></a>模块嵌套</h5><p>在一个模块中使用另一个模块</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
    <span class="token keyword">class</span> <span class="token class-name">Module1</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//Nodom会将模板代码编译成虚拟Dom树，再渲染至真实Dom上</span>
        <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;div>
                    &lt;span>&#123;&#123;msg&#125;&#125;&lt;/span>
                    &lt;button e-click="change">修改数据&lt;/button>
                    &lt;Module2/>
                &lt;/div>
            </span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//定义模块需要的数据</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'Hello World'</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//自定义模块方法</span>
        <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">model<span class="token punctuation">,</span>Vdom<span class="token punctuation">,</span>Nevent<span class="token punctuation">,</span>event</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            model<span class="token punctuation">.</span>msg<span class="token operator">=</span><span class="token string">'nodom3'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        modules <span class="token operator">=</span> <span class="token punctuation">[</span>Module2<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">class</span> <span class="token class-name">Module2</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
        <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;div>
                    &lt;span>这是另一个模块&lt;/span>
                &lt;/div>
            </span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">nodom</span><span class="token punctuation">(</span>Module1<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h5 id="模块别名"><a href="#模块别名" class="headerlink" title="模块别名"></a>模块别名</h5><p>使用<code>registModule</code>方法修改模块使用时的别名。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">ModuleA</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
   <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    	<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  		&lt;div>
  			&lt;span>This is ModuleA&lt;/span>
  		&lt;/div>
  	</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 模块A注册</span>
<span class="token function">registModule</span><span class="token punctuation">(</span>ModuleA<span class="token punctuation">,</span><span class="token string">'mod-a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="指令写法"><a href="#指令写法" class="headerlink" title="指令写法"></a>指令写法</h4><p>Nodom的指令以<code>x-</code>开头。如<code>x-show</code>指令，用于控制一个元素是否渲染</p>
<h4 id="事件写法"><a href="#事件写法" class="headerlink" title="事件写法"></a>事件写法</h4><p>Nodom的事件命名为<code>e-</code> +<code>原生事件名</code>如：<code>e-click</code></p>
<h4 id="表达式（响应式数据）"><a href="#表达式（响应式数据）" class="headerlink" title="表达式（响应式数据）"></a>表达式（响应式数据）</h4><p>使用<code>&#123;&#123;&#125;&#125;</code>进行数据绑定</p>
<p>Nodom的表达式对<code>原生JS表达式</code>实现了支持。确保双括号内传入的是单个JS表达式，即可获得返回计算结果。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Module1</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token comment">//Nodom会将模板代码编译成虚拟Dom树，再渲染至真实Dom上</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;span>&#123;&#123;msg&#125;&#125;&lt;/span>
                &lt;button e-click="change">修改数据&lt;/button>
                &lt;button e-click="switchShow">开关&lt;/button>
                &lt;Module2 x-show=&#123;&#123;isShow&#125;&#125;/>
                &lt;p>userName is:&#123;&#123;user.userName&#125;&#125;&lt;/p>
                &lt;p>Is the age older than 15 years old? &#123;&#123;user.age>15?true:false&#125;&#125;&lt;/p>
                &lt;p>userName 大写：&#123;&#123;user.userName.toUpperCase()&#125;&#125;&lt;/p>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">//定义模块需要的数据</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'Hello World'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">isShow</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">user</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'jack'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">//自定义模块方法</span>
    <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">model<span class="token punctuation">,</span>Vdom<span class="token punctuation">,</span>Nevent<span class="token punctuation">,</span>event</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        model<span class="token punctuation">.</span>msg<span class="token operator">=</span><span class="token string">'nodom3'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">//指令</span>
    <span class="token function">switchShow</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        model<span class="token punctuation">.</span>isShow <span class="token operator">=</span><span class="token operator">!</span> model<span class="token punctuation">.</span>isShow<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    modules <span class="token operator">=</span> <span class="token punctuation">[</span>Module2<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在表达式内，JS常见的内置对象是可用的，比如：Math、Object、Date等。由于表达式的执行环境是一个沙盒，不能在内部使用用户定义的全局变量。</p>
<p>如正则表达式、原生callback作为回调函数，在内部传参时。无法处理。</p>
<p>一个可行的解决方案是，将这些操作使用函数封装，在表达式内部调用封装好的函数。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Module3</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;div x-repeat=&#123;&#123;getRows(rows)&#125;&#125;>
                    name is :&#123;&#123;name&#125;&#125;
                &lt;/div>

                &lt;span>&#123;&#123;handleStr(str)&#125;&#125;&lt;/span>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">getRows</span><span class="token punctuation">(</span><span class="token parameter">rows</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//map会返回一个新数组</span>
        <span class="token keyword">return</span> rows<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
            item<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'name'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
            <span class="token keyword">return</span> item<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">handleStr</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">str</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token string">'nodom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span><span class="token punctuation">&#123;</span>
            <span class="token literal-property property">str</span><span class="token operator">:</span><span class="token string">'this is str'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rows</span><span class="token operator">:</span><span class="token punctuation">[</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在表达式内，可以访问模块实例与表达式所在节点对应的model。包括（获取实例数据，访问模块属性，调用模块方法）</p>
<p>当表达式内的计算结果产生不可预知的错误，默认的，会返回空字符串，确保程序运行时不会出错。</p>
<h4 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h4><p>Nodom中有专门的事件类NEvent来处理Dom的事件操作。如：e-click、e-mouseup等。支持所有HTML元素标准事件。</p>
<h5 id="回调函数的参数："><a href="#回调函数的参数：" class="headerlink" title="回调函数的参数："></a>回调函数的参数：</h5><p>事件自带4个参数</p>
<table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">参数名</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">model</td>
<td align="center">dom对应的model</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">vdom</td>
<td align="center">事件对象对应的虚拟dom</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">nEvent</td>
<td align="center">Nodom事件对象</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">event</td>
<td align="center">html原生事件对象</td>
</tr>
</tbody></table>
<p>如：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">addCount</span><span class="token punctuation">(</span><span class="token parameter">model<span class="token punctuation">,</span>vdom<span class="token punctuation">,</span>nEvent<span class="token punctuation">,</span>event</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">&#125;</span></code></pre>

<h5 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h5><p>在传入事件处理方法时，可以用<code>:</code>分隔的形式传入指定时间修饰符。支持三种修饰符：</p>
<table>
<thead>
<tr>
<th align="center">名字</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">once</td>
<td align="center">事件只执行一次</td>
</tr>
<tr>
<td align="center">nopopo</td>
<td align="center">禁止冒泡</td>
</tr>
<tr>
<td align="center">delg</td>
<td align="center">事件代理到父对象</td>
</tr>
</tbody></table>
<h4 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h4><p>指令用于增强元素的表现能力。以设置元素属性（attribute）的形式来使用。指令具有优先级，按照数字从小到大，数字越小，优先级越高。优先级高的指令有限执行。</p>
<table>
<thead>
<tr>
<th align="center">指令名</th>
<th align="center">指令优先级</th>
<th align="center">指令描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">model</td>
<td align="center">1</td>
<td align="center">绑定数据</td>
</tr>
<tr>
<td align="center">repeat</td>
<td align="center">2</td>
<td align="center">按照绑定的数组数据生成多个相同节点</td>
</tr>
<tr>
<td align="center">recur</td>
<td align="center">2</td>
<td align="center">递归结构</td>
</tr>
<tr>
<td align="center">if</td>
<td align="center">5</td>
<td align="center">条件判断</td>
</tr>
<tr>
<td align="center">else</td>
<td align="center">5</td>
<td align="center">条件判断</td>
</tr>
<tr>
<td align="center">elseif</td>
<td align="center">5</td>
<td align="center">条件判断</td>
</tr>
<tr>
<td align="center">endif</td>
<td align="center">5</td>
<td align="center">结束判断</td>
</tr>
<tr>
<td align="center">show</td>
<td align="center">5</td>
<td align="center">显示视图</td>
</tr>
<tr>
<td align="center">slot</td>
<td align="center">5</td>
<td align="center">插槽</td>
</tr>
<tr>
<td align="center">module</td>
<td align="center">8</td>
<td align="center">加载模块</td>
</tr>
<tr>
<td align="center">field</td>
<td align="center">10</td>
<td align="center">双向数据绑定</td>
</tr>
<tr>
<td align="center">route</td>
<td align="center">10</td>
<td align="center">路由跳转</td>
</tr>
<tr>
<td align="center">router</td>
<td align="center">10</td>
<td align="center">路由占位</td>
</tr>
</tbody></table>
<h5 id="Model-指令"><a href="#Model-指令" class="headerlink" title="Model 指令"></a>Model 指令</h5><p>model指令用于给view双向绑定数据，数据采用层级关系。</p>
<p>使用x-module指令加模块名，Nodom会自动创建实例并将其渲染。</p>
<h5 id="Filed指令"><a href="#Filed指令" class="headerlink" title="Filed指令"></a>Filed指令</h5><p>filed指令用于实现输入类型元素，如input、select、textarea等输入元素与数据项之间的双向绑定。</p>
<p>配置说明：</p>
<ul>
<li>绑定单选框radio：多个radio 的x-field值必须设置为同一个数据项，同时需要设置value属性，该属性与数据项可能选值保持一致。</li>
<li>绑定复选框checkbox：除了设置x-field绑定数据项外，还需要设置yes-value和no-value两个属性，分别对应选中和未选中时所绑定数据项的值。</li>
<li>绑定select：多个option选项可以使用x-repeat指令生成，同时使用x-field给select绑定初始数据即可。</li>
<li>绑定textarea：直接使用x-field绑定数据项即可。</li>
</ul>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Module5</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
        <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;div>
&lt;!--                绑定name数据项-->
                    姓名：&lt;input x-field="name" e-click="printInput"/>
&lt;!--                绑定sexy数据-->
                    性别：&lt;input type="radio" x-field="sexy" value="M" e-click="printSexy"/>男
                    &lt;input type="radio" x-field="sexy" value="F" e-click="printSexy"/>女
&lt;!--                绑定married数据项-->
                    已婚：&lt;input type="checkbox" x-field="married" yes-value="1" no-value="0"/>
&lt;!--                    绑定edu数据项，并使用x-field指令生成多个option-->
                    学历：&lt;select x-field="edu">
                            &lt;option x-repeat=&#123;&#123;edus&#125;&#125; value=&#123;&#123;eduId&#125;&#125;>&#123;&#123;eduName&#125;&#125;&lt;/option>
                        &lt;/select>
                &lt;/div>
            </span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'nodom'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">sexy</span><span class="token operator">:</span><span class="token string">'F'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">married</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token literal-property property">edu</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token literal-property property">birth</span><span class="token operator">:</span><span class="token string">'2017-5-11'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">edus</span><span class="token operator">:</span><span class="token punctuation">[</span>
                    <span class="token punctuation">&#123;</span><span class="token literal-property property">eduId</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">eduName</span><span class="token operator">:</span><span class="token string">'高中'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    <span class="token punctuation">&#123;</span><span class="token literal-property property">eduId</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token literal-property property">eduName</span><span class="token operator">:</span><span class="token string">'本科'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    <span class="token punctuation">&#123;</span><span class="token literal-property property">eduId</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token literal-property property">eduName</span><span class="token operator">:</span><span class="token string">'硕士研究生'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    <span class="token punctuation">&#123;</span><span class="token literal-property property">eduId</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token literal-property property">eduName</span><span class="token operator">:</span><span class="token string">'博士研究生'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">printSexy</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>sexy<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token function">printInput</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span></code></pre>

<p><strong>问题：双向绑定后的数据，在修改之后，数据类型自动转为字符类型</strong></p>
<p>如下：</p>
<p><img src="C:\Users\78125\AppData\Roaming\Typora\typora-user-images\image-20220801093030941.png" alt="image-20220801093030941" loading="lazy"></p>
<h4 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h4><p>在Nodom中，提供了两种方式来实现列表的渲染</p>
<p>1、通过内置指令x-repeat的方式。将列表数据直接传递给该指令。</p>
<p>2、通过Nodom实现的<code>&lt;for&gt;</code>内置标签。该标签含有一个cond属性，用来传入需要渲染的列表数据。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Module5</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div>
            &lt;div class="code">
                菜单：
                &lt;div x-repeat=&#123;&#123;foods&#125;&#125;>
                    &lt;span>菜名：&#123;&#123;name&#125;&#125;,价格：&#123;&#123;price&#125;&#125;&lt;/span>
                &lt;/div>
            &lt;/div>
            &lt;div class="code">
                菜单：
                &lt;for cond=&#123;&#123;foods&#125;&#125;>
                    &lt;span>菜名：&#123;&#123;name&#125;&#125;,价格：&#123;&#123;price&#125;&#125;&lt;/span>
                &lt;/for>
            &lt;/div>
        &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">foods</span><span class="token operator">:</span><span class="token punctuation">[</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'青椒肉丝'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'回锅肉'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'宫爆鸡丁'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'红烧肉'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'红烧猪蹄'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在<code>x-repeat</code>指令会为生成出来的节点绑定对应model，如果需要访问外层model中的数据，可以在表达式中使用<code>this.model</code>。这样表达式就会从模块的根model开始解析数据。</p>
<p><code>$index</code> 这一变量，用来获取当前索引。使用之前需要指定索引的名称。</p>
<h5 id="自定义过滤数组"><a href="#自定义过滤数组" class="headerlink" title="自定义过滤数组"></a>自定义过滤数组</h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
	<span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
			&lt;div>
				&lt;!-- 使用函数筛选列表 -->
				&lt;div x-repeat=&#123;&#123;getFood(foods)&#125;&#125; >
        			菜名：&#123;&#123;name&#125;&#125;，价格：&#123;&#123;price&#125;&#125;
    			&lt;/div>
				
				&lt;for cond=&#123;&#123;getFood(foods)&#125;&#125; >
        			菜名：&#123;&#123;name&#125;&#125;，价格：&#123;&#123;price&#125;&#125;
    			&lt;/for>
			&lt;/div>
		</span><span class="token template-punctuation string">`</span></span>
	<span class="token punctuation">&#125;</span>
	<span class="token function">getFood</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> item<span class="token punctuation">.</span>price <span class="token operator">></span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			<span class="token literal-property property">foods</span><span class="token operator">:</span><span class="token punctuation">[</span>
					<span class="token punctuation">&#123;</span>
						<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'青椒肉丝'</span><span class="token punctuation">,</span>
						<span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#123;</span>
						<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'回锅肉'</span><span class="token punctuation">,</span>
						<span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#123;</span>
						<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'宫爆鸡丁'</span><span class="token punctuation">,</span>
						<span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#123;</span>
						<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'红烧肉'</span><span class="token punctuation">,</span>
						<span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#123;</span>
						<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'红烧猪蹄'</span><span class="token punctuation">,</span>
						<span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token punctuation">]</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">nodom</span><span class="token punctuation">(</span>Main<span class="token punctuation">,</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>在自定义函数中传入的数据已经不是原来data中的初始数据了，而是做了响应式处理的响应式数据。</p>
<p><code>x-recur</code>指令可以用来处理复杂的嵌套列表</p>
<h4 id="虚拟DOM"><a href="#虚拟DOM" class="headerlink" title="虚拟DOM"></a>虚拟DOM</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>
<span class="token comment">/**
 * 元素名，例如&lt;div>&lt;/div>标签，tagName为div；&lt;span>&lt;/span>的tagName为span
 */</span>
<span class="token literal-property property">tagName</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    
<span class="token comment">/**
 * Nodom中虚拟DOM的key是唯一的标识，对节点进行操作时提供正确的位置，获取对应的真实dom
 */</span>
<span class="token literal-property property">key</span><span class="token operator">:</span> string

<span class="token comment">/**
 * 绑定事件模型，在方法中可以传入model参数来获得模型中的值
 */</span>
<span class="token literal-property property">model</span><span class="token operator">:</span> Model<span class="token punctuation">;</span>
	
<span class="token comment">/**
 * 存放虚拟dom的属性
 */</span>
<span class="token literal-property property">props</span><span class="token operator">:</span>Object

<span class="token comment">/**
* 当前虚拟dom节点的父虚拟dom节点
*/</span>
<span class="token literal-property property">parent</span><span class="token operator">:</span>IRenderedDom
    
<span class="token comment">/**
* 当前虚拟dom节点对应的VirtualDom
*/</span>
<span class="token literal-property property">vdom</span><span class="token operator">:</span>VirtualDom
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><table>
<thead>
<tr>
<th align="left"><strong>属性</strong></th>
<th><strong>类型</strong></th>
<th align="left"><strong>定义</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">tagName</td>
<td>string</td>
<td align="left">标签名如<div></div>的他给Name为’div’</td>
</tr>
<tr>
<td align="left">key</td>
<td>string</td>
<td align="left">是唯一的标识符，也可以通过key来获取虚拟dom的值</td>
</tr>
<tr>
<td align="left">model</td>
<td>Model</td>
<td align="left">绑定Model</td>
</tr>
<tr>
<td align="left">props</td>
<td>Object</td>
<td align="left">存放当前节点的属性</td>
</tr>
<tr>
<td align="left">parent</td>
<td>IRenderedDom</td>
<td align="left">当前节点的父虚拟dom节点</td>
</tr>
<tr>
<td align="left">vdom</td>
<td>VirtualDom</td>
<td align="left">当前节点对应的VirtualDom，管理该节点的指令，事件等</td>
</tr>
</tbody></table>
<h4 id="数据传递"><a href="#数据传递" class="headerlink" title="数据传递"></a>数据传递</h4><p>props传值</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
&lt;!--                &lt;User name="ad">&lt;/User>-->
                &lt;User $name=&#123;&#123;name&#125;&#125;>&lt;/User>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Nodom'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//模块传值，父模块传递给子模块</span>
<span class="token comment">// class ModuleA extends Module&#123;</span>
<span class="token comment">//     template(props) &#123;</span>
<span class="token comment">//         let str;</span>
<span class="token comment">//         if(props.name=='add')&#123;</span>
<span class="token comment">//             str = `&lt;h1>add&lt;/h1>`;</span>
<span class="token comment">//         &#125;else&#123;</span>
<span class="token comment">//             str = `&lt;h2>none&lt;/h2>`;</span>
<span class="token comment">//         &#125;</span>
<span class="token comment">//         return `&lt;div> $&#123;str&#125;&lt;/div>`</span>
<span class="token comment">//     &#125;</span>
<span class="token comment">// &#125;</span>
<span class="token comment">// registModule(ModuleA,'User')</span></code></pre>

<p>Nodom数据传递为单项数据流，Props可以实现父模块向子模块的数据传递，但是这是被动的传递方式。如果需要将其保存至子模块内的代理数据对象，可以在传递的属性名前，加上$前缀，Nodom会将其传入子模块的根Model内，实现响应式监听。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">,</span> nodom<span class="token punctuation">,</span> registModule<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
&lt;!--                &lt;User name="ad">&lt;/User>-->
                &lt;User $name=&#123;&#123;name&#125;&#125;>&lt;/User>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Nodom'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//数据传递</span>
<span class="token keyword">class</span> <span class="token class-name">ModuleB</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div>
                    &lt;h1>&#123;&#123;name&#125;&#125;&lt;/h1>
                &lt;/div></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//必须使用registModule的形式才能实现，响应式监听</span>
<span class="token function">registModule</span><span class="token punctuation">(</span>ModuleB<span class="token punctuation">,</span><span class="token string">'User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h5 id="反向传递"><a href="#反向传递" class="headerlink" title="反向传递"></a>反向传递</h5><p>子模块向父模块传递值</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">,</span> nodom<span class="token punctuation">,</span> registModule<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;!--&lt;User name="ad">&lt;/User>-->
                &lt;!--&lt;User $name=&#123;&#123;name&#125;&#125;>&lt;/User>-->
                count=&#123;&#123;sum&#125;&#125;
                &lt;User add=&#123;&#123;this.add&#125;&#125;>&lt;/User>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Nodom'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">sum</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function-variable function">add</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>model<span class="token punctuation">.</span>sum<span class="token operator">++</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">ModuleC</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>parentChange<span class="token operator">=</span>props<span class="token punctuation">.</span>add<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;button e-click="change">父模块+1&lt;/button>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parentChange</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">onRender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">registModule</span><span class="token punctuation">(</span>ModuleC<span class="token punctuation">,</span><span class="token string">'User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h5 id="深层数据传递"><a href="#深层数据传递" class="headerlink" title="深层数据传递"></a>深层数据传递</h5><p>可以跨越多个模块层次的数据传递</p>
<p>Nodom提供一个<code>GlobalCache</code>来管理共享数据。</p>
<p><code>GlobalCache</code>内置<code>get、set、remove、subscribe</code>方法</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">,</span> nodom<span class="token punctuation">,</span> registModule<span class="token punctuation">,</span>GlobalCache<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    modules<span class="token operator">=</span><span class="token punctuation">[</span>ModuleD<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;!--&lt;User name="ad">&lt;/User>-->
                &lt;!--&lt;User $name=&#123;&#123;name&#125;&#125;>&lt;/User>-->
                &lt;!--&lt;User add=&#123;&#123;this.add&#125;&#125;>&lt;/User>-->
                &#123;&#123;msg&#125;&#125;
                &lt;ModuleD/>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Nodom'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">sum</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">onBeforeFirstRender</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> GlobalCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"globalData"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// model.msg=data.msg;</span>
        <span class="token comment">//做出响应式修改。</span>
        GlobalCache<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"globalData"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
            model<span class="token punctuation">.</span>msg<span class="token operator">=</span>val<span class="token punctuation">.</span>msg<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function-variable function">add</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>model<span class="token punctuation">.</span>sum<span class="token operator">++</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//深层数据传递，对于跨越多个模块层次的数据传递</span>
GlobalCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"globalData"</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ModuleD</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div>
            &lt;button e-click="change">change&lt;/button>
        &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> GlobalCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'globalData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        data<span class="token punctuation">.</span>msg<span class="token operator">++</span><span class="token punctuation">;</span>
        GlobalCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"globalData"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>也可以使用<strong>第三发数据发布-订阅</strong>库</p>
<p>在开发大型项目时，可以使用数据管理库帮助我们管理数据，使数据以可预测的方式发生变化，推荐使用Nodom团队开发的<strong>kayaks</strong>库，或者其他优秀的数据管理库。</p>
<h5 id="Props中的template"><a href="#Props中的template" class="headerlink" title="Props中的template"></a>Props中的template</h5><p>若子模块中的模板生成依赖父模块中的某些字符串，可以使用以下方式传递：</p>
<hr>
<h4 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h4><p>插槽作为模板暴露的外部接口，增大了模板的灵活度，有利于模块化开发。Nodom以指令和自定义元素的方式实现插槽功能。</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--自定义元素的方式使用插槽--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>
	title
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!--指令的形式使用插槽--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">x-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>title<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>

<h5 id="默认插槽"><a href="#默认插槽" class="headerlink" title="默认插槽"></a>默认插槽</h5><p>在模块标签内的模板代码会作为待插入的节点，如果子模块内有默认的插入位置<code>&lt;slot&gt;&lt;/slot&gt;</code>，将会将节点插入该位置。如果没有待插入的内容，子模块内<code>slot</code>标签将会正常显示。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">,</span>nodom<span class="token punctuation">,</span>registModule<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        &lt;User>
            &lt;button>我是父模块&lt;/button>
        &lt;/User>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">ModuleA</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        &lt;slot>
            我是默认内容
        &lt;/slot>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">registModule</span><span class="token punctuation">(</span>ModuleA<span class="token punctuation">,</span><span class="token string">'User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">nodom</span><span class="token punctuation">(</span>Main<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span></code></pre>

<h5 id="命名插槽"><a href="#命名插槽" class="headerlink" title="命名插槽"></a>命名插槽</h5><p>命名插槽就是给插槽定义插槽名，传入的标签需要与插槽名一致才可以发生替换。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        &lt;User>
            &lt;slot name="title">
            &lt;button>我是父模块title&lt;/button>
            &lt;/slot>
            &lt;slot name="footer">
            &lt;button>我是父模块footer&lt;/button>
            &lt;/slot>
        &lt;/User>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//命名插槽</span>
<span class="token keyword">class</span> <span class="token class-name">ModuleB</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        &lt;slot name="title">
            我是title
        &lt;/slot>
        &lt;slot name="footer">
            我是footer
        &lt;/slot>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">registModule</span><span class="token punctuation">(</span>ModuleB<span class="token punctuation">,</span><span class="token string">'User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h5 id="内部渲染插槽"><a href="#内部渲染插槽" class="headerlink" title="内部渲染插槽"></a>内部渲染插槽</h5><p>插槽内容在子模块渲染。就是相当于传递模板代码，而不再父模块内渲染。对于这种情况，只需要在子模块的插槽定义出，附加innerRender属性即可。</p>
<hr>
<h4 id="数据模型（Model）"><a href="#数据模型（Model）" class="headerlink" title="数据模型（Model）"></a>数据模型（Model）</h4><p><code>Model</code>作为模块数据的提供这，绑定到模块的数据模型都由<code>Model</code>管理。</p>
<p><code>Model</code>是一个有<code>Proxy</code>代理的对象，<code>Model</code>的数据来源有两个：</p>
<ul>
<li>模块实例的<code>data()</code>函数返回的对象；</li>
<li>父模块通过<code>$data</code>方式传入的值。</li>
</ul>
<p>每个模块都有独立的<code>Model</code>，但可以通过在使用子模块时传入属性<code>useDomModel</code>的方式与子模块共享<code>Model</code>，示例：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">,</span>registModule<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        &lt;ModuleA useDomModel>&lt;/ModuleA>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Nodom'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">ModuleA</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        &#123;&#123;name&#125;&#125;
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">registModule</span><span class="token punctuation">(</span>ModuleA<span class="token punctuation">,</span><span class="token string">'User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">nodom</span><span class="token punctuation">(</span>Main<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p><code>Model</code> 会深层代理内部的<code>object</code>类型数据</p>
<p>基于<code>Proxy</code>，<code>Nodom</code>可以实现数据劫持和数据监听，来做到数据改变时候的响应式更新渲染。</p>
<p>在使用时，可以直接把<code>Model</code>当做对象来操作</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        &#123;&#123;count&#125;&#125;
&lt;!--        &lt;ModuleA useDomModel>&lt;/ModuleA>-->
        &lt;button e-click="changeCount">click&lt;/button>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'Hello'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Nodom'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">obj</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
          <span class="token literal-property property">arr</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">changeCount</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      model<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<!--Model在管理数据的时候会新增部分以$开头的数据项和方法，所以在定义方法和数据时，尽量避免使用$开头的数据项和方法名-->

<h5 id="Model与模块渲染"><a href="#Model与模块渲染" class="headerlink" title="Model与模块渲染"></a>Model与模块渲染</h5><p>每个<code>Model</code>存有一个模块列表，当<code>Model</code>内部的数据变化时，会引起该<code>Model</code>模块列表中所有模块的渲染。一个<code>Model</code>的模块列表中默认只有初始化该<code>Model</code>的模块，如果需要该<code>Model</code>触发多个模块的渲染，则要将<strong>需要触发渲染的模块</strong>添加到该<code>Model</code>对应的模块列表中（<code>Model</code>与模块的绑定请查看API <code>ModelManager.bindToModule</code>）</p>
<h6 id="set-方法"><a href="#set-方法" class="headerlink" title="$set()方法"></a><strong>$set()方法</strong></h6><p><code>Model</code>中有一个<code>$set</code>方法，可以应对一些特殊情况。例如，需要往<code>Model</code>上设置一个深层次的对象。</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">//会报错，因为data1为undefined</span>
    model<span class="token punctuation">.</span>data1<span class="token punctuation">.</span>data2<span class="token punctuation">.</span>data3<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'a'</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token comment">//使用$set方法可以避免该问题，如果不存在这么深层次的对象$set会帮忙创建</span>
    model<span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token string">"data1.data2.data3"</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'a'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h6 id="watch"><a href="#watch" class="headerlink" title="$watch()"></a>$watch()</h6><p>Nodom在<code>Model</code>里提供了<code>$watch()</code>方法来见识<code>Model</code>中的数据变化，当数据变化时执行指定的操作。</p>
<p><strong>参数说明</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>key</td>
<td>string或string[]</td>
<td>监听属性</td>
</tr>
<tr>
<td>operate</td>
<td>Function</td>
<td>监听触发方法，默认参数为(model,key,oldValue,newValue)</td>
</tr>
<tr>
<td>module</td>
<td>Module</td>
<td>监听模块，如果设置，则触发时，只针对该模块进行操作，否则如果model绑定了多个模块，则每个模块都会触发operate方法</td>
</tr>
<tr>
<td>deep</td>
<td>boolean</td>
<td>如果设置为true，当key对应项为对象时，对象的所有属性、子孙对象所有属性都会watch，慎重使用该参数，避免watch过多造成性能缺陷。</td>
</tr>
</tbody></table>
<p><strong>取消watch</strong></p>
<p><code>$watch</code>方法会返回一个函数，当不再需要<code>watch</code>时，执行该函数即可取消<code>watch</code></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        &#123;&#123;count&#125;&#125;
&lt;!--        &lt;ModuleA useDomModel>&lt;/ModuleA>-->
        &lt;button e-click="changeCount">change&lt;/button>
        &lt;button e-click="watch">watch&lt;/button>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'Hello'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Nodom'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">obj</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
          <span class="token literal-property property">arr</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">changeCount</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      model<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token comment">//watch方法的使用</span>
  <span class="token function">watch</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      model<span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">model<span class="token punctuation">,</span>key<span class="token punctuation">,</span>oldVal<span class="token punctuation">,</span>newVal</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'检测到数据变化'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'oldVal:'</span><span class="token punctuation">,</span>oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'newVal:'</span><span class="token punctuation">,</span>newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="渲染"><a href="#渲染" class="headerlink" title="渲染"></a>渲染</h4><p>Nodom的渲染是基于数据驱动的，也就是说只有Model内的数据发生了变化，当前模块才会进行重新渲染的操作。渲染时，Nodom将新旧两次渲染产生的虚拟Dom树进行对比，找到变化的节点，实现最小操作真实Dom的目的。</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        父模块：&#123;&#123;title&#125;&#125;
       &lt;!-- 点击按钮后，由于改变了响应式数据，触发了根模块的渲染-->
        &lt;button e-click="change">改变title&lt;/button>
        &lt;User title=&#123;&#123;title&#125;&#125;>&lt;/User>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'parent'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'Nodom'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">obj</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
          <span class="token literal-property property">arr</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      model<span class="token punctuation">.</span>title<span class="token operator">=</span><span class="token string">'none'</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//渲染 由于父模块传入的Props未发生改变，那么父模块的更新不会影响子模块。</span>
<span class="token keyword">class</span> <span class="token class-name">ModuleA</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>props<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&#123;&#123;title&#125;&#125;
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'child'</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">registModule</span><span class="token punctuation">(</span>ModuleA<span class="token punctuation">,</span><span class="token string">'User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h6 id="Props的副作用"><a href="#Props的副作用" class="headerlink" title="Props的副作用"></a>Props的副作用</h6><p>在使用props的场景下，如果我们传递的属性值发生改变，那么子模块会先触发编译模板的过程在进行渲染操作，也就是模块重新激活。</p>
<h6 id="特殊的，在Props中，对于传递Object类型的数据，每次渲染，Nodom会将该模块默认为数据改变。"><a href="#特殊的，在Props中，对于传递Object类型的数据，每次渲染，Nodom会将该模块默认为数据改变。" class="headerlink" title="特殊的，在Props中，对于传递Object类型的数据，每次渲染，Nodom会将该模块默认为数据改变。"></a>特殊的，在Props中，对于传递Object类型的数据，每次渲染，Nodom会将该模块默认为数据改变。</h6><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
  <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
        &lt;button e-click="change">改变title&lt;/button>
        &lt;User title=&#123;&#123;title&#125;&#125;>&lt;/User>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span><span class="token punctuation">&#123;</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'parent'</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      model<span class="token punctuation">.</span>title<span class="token operator">=</span><span class="token string">'none'</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//模块A 由于父模块传入的Props数据发生了改变，ModuleA重新激活，触发template函数进行编译，再进行渲染</span>
<span class="token keyword">class</span> <span class="token class-name">ModuleA</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>props<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&#123;&#123;title&#125;&#125;
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'child'</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">registModule</span><span class="token punctuation">(</span>ModuleA<span class="token punctuation">,</span><span class="token string">'User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h6 id="单词渲染模块"><a href="#单词渲染模块" class="headerlink" title="单词渲染模块"></a>单词渲染模块</h6><p>如果想要摒弃Props带来的渲染副作用，Nodom提供单词渲染模块。单词渲染模块只有在首次渲染时才会结构Props，随后无论Props如何变化，都不会影响到模块本身。使用方式为在模块标签内附加<code>renderOnce</code>属性</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
			&lt;div>
  				&lt;button e-click='change'>改变title&lt;/button>
  				&lt;!-- 添加renderOnce属性使其只渲染一次-->
				&lt;user renderOnce title=&#123;&#123;title&#125;&#125;>&lt;/user>
			&lt;/div>
		</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'parent'</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        model<span class="token punctuation">.</span>title<span class="token operator">=</span><span class="token string">'none'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">nodom</span><span class="token punctuation">(</span>Main<span class="token punctuation">,</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="CSS支持"><a href="#CSS支持" class="headerlink" title="CSS支持"></a>CSS支持</h4><p>Nodom对CSS提供支持</p>
<p>在模板代码中添加<code>&lt;style&gt;&lt;/style&gt;</code>标签中直接写入CSS样式，示例</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">,</span>registModule<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;h1 class="test">Hello nodom!&lt;/h1>
&lt;!--                style标签创建css样式-->
                &lt;style>
                .test&#123;
                    color:red;
                    text-align: center;
                &#125;
                &lt;/style>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">nodom</span><span class="token punctuation">(</span>Main<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>在模板代码中的<code>&lt;style&gt;&lt;/style&gt;</code>标签中通过表达式调用函数返回CSS样式代码串，示例代码如下：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">,</span>registModule<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;h1 class="test">Hello nodom!&lt;/h1>
                &lt;style>
                &#123;&#123;css()&#125;&#125;
                &lt;/style>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            .test&#123;
                color:red;
            &#125;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">nodom</span><span class="token punctuation">(</span>Main<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>在模板代码中的<code>&lt;style&gt;&lt;/style&gt;</code>标签汇总通过<code>@import url(&#39;CSS url路径&#39;)</code>引入对应CSS样式文件，示例代码：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
		&lt;div>
			&lt;h1 class="test">Hello nodom!&lt;/h1>
			&lt;style>
				@import url('./style.css')
			&lt;/style>
		&lt;/div>
	</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>对模板代码中需要样式的节点直接写行内样式，示例代码如下：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Module1</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span>
     <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
				&lt;div>
                    &lt;h1 style="color: red;" class="test">Hello nodom!&lt;/h1>
                &lt;/div>
			</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>	
<span class="token function">nodom</span><span class="token punctuation">(</span>Module1<span class="token punctuation">,</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h6 id="scope属性"><a href="#scope属性" class="headerlink" title="scope属性"></a>scope属性</h6><p>在style中添加该属性后，Nodom会自动在CSS 选择器前加前置名。使CSS样式的作用域限定在当前模块内，不会影响到其他模块。</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   <span class="token keyword">return</span>  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
		&lt;div>
			&lt;h1 class="test">Hello nodom!&lt;/h1>
			&lt;style scope="this">
				@import url('./style.css')
			&lt;/style>
		&lt;/div>
	</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h4><p>Nodom提供了缓存功能，缓存空间是一个Object，以key-value的形式存储在内存中；</p>
<p>key 的类型是string，支持多级数据分割，例如：China.capital;</p>
<p>value支持任意类型的数据。</p>
<p>用户可以自行选择将常用的内容存储在缓存空间，如下：</p>
<pre class="language-js" data-language="js"><code class="language-js">GlobalCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'China.capital'</span><span class="token punctuation">,</span><span class="token string">'北京'</span><span class="token punctuation">)</span></code></pre>

<p>根据键名从缓存中读取数据，例子如下：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">GlobalCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"China.captial"</span><span class="token punctuation">)</span></code></pre>

<p>根据键名从缓存中移除，例子如下：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">GlobalCache<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"China.captial"</span><span class="token punctuation">)</span></code></pre>

<p>另外，还提供对以下对象在内存中进行存储、获取和移除等操作。</p>
<ul>
<li>指令实例</li>
<li>指令参数</li>
<li>表达式实例</li>
<li>事件实例</li>
<li>事件参数</li>
<li>虚拟dom</li>
<li>html节点</li>
<li>dom参数</li>
</ul>
<h4 id="动画与过渡"><a href="#动画与过渡" class="headerlink" title="动画与过渡"></a>动画与过渡</h4><p>Nodom使用<code>x-animation</code>指令管理动画和过渡，该指令接受一个存在于<code>Model</code>上的对象，其中包括<code>tigger</code>属性和<code>name</code>属性。</p>
<ul>
<li><code>name</code>属性的值就是过渡或者动画的类名</li>
<li><code>tigger</code>为过渡的触发条件</li>
</ul>
<p>过渡分为<code>enter</code>和<code>leave</code>，触发<code>enter</code>还是<code>leave</code>由<code>tigger</code>的值确定。</p>
<ul>
<li><code>tigger</code>为<code>true</code>，触发<code>enter</code>；</li>
<li><code>tigger</code>为<code>false</code>,触发<code>leave</code>。</li>
</ul>
<p>对于<code>enter</code>过渡，需要提供以<code>-enter-active</code>、<code>-enter-from</code>、<code>-enter-to</code>为后缀的一组类名。在传入给<code>x-animation</code>指令的对象中只需要将名字传入给<code>name</code>属性，而不必添加后缀，<code>x-animation</code>在工作时会自动的加上这些后缀。这些规则对于<code>leave</code>过渡同理。</p>
<p><code>tigger</code>为<code>true</code>时，指令首先会在元素上添加<code>-enter-from</code>和<code>-enter-active</code>的类名，然后再下一帧开始的时候添加<code>-enter-to</code>的类名，同时移除掉<code>-enter-from</code>的类名。</p>
<p><code>tigger</code>为<code>false</code>时，处理流程完全一样，只不过添加的是以<code>-leave-from</code>、<code>-leave-active</code>、<code>-leave-to</code>为后缀的类名。</p>
<p>示例：</p>
<p><code>x-animation</code>管理过渡</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">,</span>GlobalCache<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;button e-click="tiggerTransition">tiggerTransition&lt;/button>
                &lt;div x-animation=&#123;&#123;transition&#125;&#125; style="width:100px;height:100px;background-color:cornflowerblue">

                &lt;/div>
                &lt;style>
                    .myfade-enter-active,
                    .myfade-leave-active &#123;
                        transition: all 1s ease;
                    &#125;
                    .myfade-enter-from,
                    .myfade-leave-to &#123;
                        opacity: 0;
                    &#125;
                    .myfade-enter-to,
                    .myfade-leave-from &#123;
                        opacity: 1;
                    &#125;
                &lt;/style>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">transition</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'myfade'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">tigger</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">tiggerTransition</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        model<span class="token punctuation">.</span>transition<span class="token punctuation">.</span>tigger <span class="token operator">=</span> <span class="token operator">!</span>model<span class="token punctuation">.</span>transition<span class="token punctuation">.</span>tigger
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">nodom</span><span class="token punctuation">(</span>Main<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>

<p><code>x-animation</code>管理动画</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Module1</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;button e-click="tiggerAnimation">tiggerAnimation&lt;/button>
                &lt;div x-animation=&#123;&#123;animation&#125;&#125; style="width:100px;height:100px;background-color:blue">&lt;/div>
                &lt;style>
                    .myfade-enter-active &#123;
                        animation-name: myfade;
                        animation-duration: 1s;
                    &#125;
                    .myfade-leave-active &#123;
                        animation-name: myfade;
                        animation-duration: 1s;
                        animation-direction: reverse;
                    &#125;
                    @keyframes myfade &#123;
                        0% &#123;
                            opacity: 0;
                        &#125;
                        100% &#123;
                            opacity: 1;
                        &#125;
                    &#125;
                &lt;/style>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">animation</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'myfade'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">tigger</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">//type默认值为transition，如果是动画则需要指明</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'animation'</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">tiggerAnimation</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        model<span class="token punctuation">.</span>animation<span class="token punctuation">.</span>tigger <span class="token operator">=</span> <span class="token operator">!</span>model<span class="token punctuation">.</span>animation<span class="token punctuation">.</span>tigger
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">nodom</span><span class="token punctuation">(</span>Module1<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>对于部分常用的过渡效果，我们已经将其封装进入了nodomui.css文件，你只需要全局引入该css文件即可。<br>提供的过渡效果见下表：</p>
<table>
<thead>
<tr>
<th align="center">name</th>
<th align="center">效果</th>
</tr>
</thead>
<tbody><tr>
<td align="center">fade</td>
<td align="center">渐入渐出</td>
</tr>
<tr>
<td align="center">scale-fixtop</td>
<td align="center">固定上面缩放</td>
</tr>
<tr>
<td align="center">scale-fixleft</td>
<td align="center">固定左边缩放</td>
</tr>
<tr>
<td align="center">scale-fixbottom</td>
<td align="center">固定底边缩放</td>
</tr>
<tr>
<td align="center">scale-fixright</td>
<td align="center">固定右边缩放</td>
</tr>
<tr>
<td align="center">scale-fixcenterX</td>
<td align="center">固定以X轴为对称轴往中间缩放</td>
</tr>
<tr>
<td align="center">scale-fixcenterY</td>
<td align="center">固定以Y轴为对称轴往中间缩放</td>
</tr>
<tr>
<td align="center">fold-height</td>
<td align="center">折叠高度</td>
</tr>
<tr>
<td align="center">fold-width</td>
<td align="center">折叠宽度</td>
</tr>
</tbody></table>
<h5 id="进入-x2F-离开动画"><a href="#进入-x2F-离开动画" class="headerlink" title="进入&#x2F;离开动画"></a>进入&#x2F;离开动画</h5><p>在传入<code>x-animation</code>指令的对象属性中设置<code>isAppear</code>(默认值为<code>true</code>)属性，可以配置当前的过渡&#x2F;动画是否进入离开过渡&#x2F;动画。</p>
<ul>
<li>若未true，则表示在离开动画播放完成之后会隐藏该元素（display：none）；</li>
<li>若未false，则表示在离开动画播放完成之后不会隐藏该元素。</li>
</ul>
<h4 id="钩子函数"><a href="#钩子函数" class="headerlink" title="钩子函数"></a>钩子函数</h4><p>在传入<code>x-animation</code>指令的对象中设置<code>hooks</code>属性，可以配置过渡&#x2F;动画执行前后的钩子函数。且这两个函数名字固定，分别为<code>before</code>和<code>after</code>。</p>
<p>他们触发的时机为：</p>
<ul>
<li><code>before</code>触发动画&#x2F;过渡之前</li>
<li><code>after</code>触发动画&#x2F;过渡之后</li>
</ul>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Module2</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;button e-click="tiggerTransition">tiggerTransition&lt;/button>
                &lt;div x-animation=&#123;&#123;transition&#125;&#125; style="width:100px;height:100px;background-color:cornflowerblue">&lt;/div>
                &lt;style>
                    @import url('./nodomui.css')
                &lt;/style>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">transition</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'fade'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">tigger</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">hooks</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    <span class="token comment">//钩子函数的this指向model，第一个参数为module</span>
                    <span class="token comment">//过渡执行前钩子函数</span>
                    <span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    <span class="token comment">//过渡执行后钩子函数</span>
                    <span class="token function">after</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">tiggerTransition</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        model<span class="token punctuation">.</span>transition<span class="token punctuation">.</span>tigger <span class="token operator">=</span> <span class="token operator">!</span>model<span class="token punctuation">.</span>transition<span class="token punctuation">.</span>tigger
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">nodom</span><span class="token punctuation">(</span>Module2<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h5 id="过渡-x2F-动画控制参数"><a href="#过渡-x2F-动画控制参数" class="headerlink" title="过渡&#x2F;动画控制参数"></a>过渡&#x2F;动画控制参数</h5><p>传入<code>x-animation</code>指令的对象不止上述提到的这些，还有一些控制参数，下表是所有可以传入的属性所示：</p>
<table>
<thead>
<tr>
<th align="center">name</th>
<th align="center">作用</th>
<th align="center">可选值</th>
<th align="center">默认值</th>
<th align="center">必填</th>
</tr>
</thead>
<tbody><tr>
<td align="center">tigger</td>
<td align="center">触发动画</td>
<td align="center">true&#x2F;false</td>
<td align="center">true</td>
<td align="center">是</td>
</tr>
<tr>
<td align="center">name</td>
<td align="center">过渡&#x2F;动画名（不包含-enter-active等后缀）</td>
<td align="center">-</td>
<td align="center">无</td>
<td align="center">是</td>
</tr>
<tr>
<td align="center">isAppear</td>
<td align="center">是否是进入离开过渡&#x2F;动画</td>
<td align="center">true&#x2F;false</td>
<td align="center">true</td>
<td align="center">否</td>
</tr>
<tr>
<td align="center">type</td>
<td align="center">是过渡还是动画</td>
<td align="center">‘aniamtion’&#x2F;‘transition’</td>
<td align="center">‘transition’</td>
<td align="center">否</td>
</tr>
<tr>
<td align="center">duration</td>
<td align="center">过渡&#x2F;动画的执行时间</td>
<td align="center">同css的duration的可选值</td>
<td align="center">‘’</td>
<td align="center">否</td>
</tr>
<tr>
<td align="center">delay</td>
<td align="center">过渡&#x2F;动画的延时时间</td>
<td align="center">同css的delay的可选值</td>
<td align="center">‘0s’</td>
<td align="center">否</td>
</tr>
<tr>
<td align="center">timingFunction</td>
<td align="center">过渡&#x2F;动画的时间函数</td>
<td align="center">同css的timingFunction的可选值</td>
<td align="center">‘ease’</td>
<td align="center">否</td>
</tr>
<tr>
<td align="center">hooks</td>
<td align="center">过渡&#x2F;动画执行前后钩子函数</td>
<td align="center">before&#x2F;after函数或者enter&#x2F;leave对象</td>
<td align="center">无</td>
<td align="center">否</td>
</tr>
</tbody></table>
<h5 id="分别配置enter-x2F-leave"><a href="#分别配置enter-x2F-leave" class="headerlink" title="分别配置enter&#x2F;leave"></a>分别配置enter&#x2F;leave</h5><p>对于一个元素的过渡&#x2F;动画可以分开配置不同的效果。</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./nodomui.js"</span><span class="token punctuation">;</span>
<span class="token comment">//分别配置enter/leave</span>
<span class="token keyword">class</span> <span class="token class-name">Module3</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;button e-click="tiggerTransition">tiggerTransition&lt;/button>
                &lt;div x-animation=&#123;&#123;transition&#125;&#125; style="width:100px;height:100px;background-color:cornflowerblue">&lt;/div>
                &lt;style type="text/css">
                    @import url("nodomui.css")
                &lt;/style>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">transition</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">tigger</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">enter</span><span class="token operator">:</span><span class="token string">"scale-fixtop"</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">leave</span><span class="token operator">:</span><span class="token string">"scale-fixleft"</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">duration</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">enter</span><span class="token operator">:</span> <span class="token string">"0.5s"</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">leave</span><span class="token operator">:</span> <span class="token string">"0.5s"</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">delay</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">enter</span><span class="token operator">:</span><span class="token string">'0.5s'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">leave</span><span class="token operator">:</span><span class="token string">"0.5s"</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">timingFunction</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">enter</span><span class="token operator">:</span><span class="token string">"ease-in-out"</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">leave</span><span class="token operator">:</span><span class="token string">"cubic-bezier(0.55,0,0.1,1)"</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">hooks</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">enter</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
                        <span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"scale-fixtop前"</span><span class="token punctuation">,</span> module<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                        <span class="token function">after</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"scale-fixtop后"</span><span class="token punctuation">,</span> module<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">leave</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                        <span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"scale-fixleft前"</span><span class="token punctuation">,</span> module<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                        <span class="token function">after</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"scale-fixleft后"</span><span class="token punctuation">,</span> module<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">tiggerTransition</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        model<span class="token punctuation">.</span>transition<span class="token punctuation">.</span>tigger <span class="token operator">=</span> <span class="token operator">!</span>model<span class="token punctuation">.</span>transition<span class="token punctuation">.</span>tigger
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">nodom</span><span class="token punctuation">(</span>Module3<span class="token punctuation">,</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><p>Nodom内置了路由功能，可以配合构建单页应用，用于模块间的切换。需要做的是将模块映射到路由。并决定最终在哪里渲染他们。</p>
<h5 id="创建路由"><a href="#创建路由" class="headerlink" title="创建路由"></a>创建路由</h5><p>Nodom提供<code>createRoute</code>方法，用于注册路由。以<code>Object</code>配置的形式指定路由的路径、对应的模块、子路由等。</p>
<h5 id="路由跳转"><a href="#路由跳转" class="headerlink" title="路由跳转"></a>路由跳转</h5><p>借助x-route指令，用户无需手动控制路由跳转。但可以使用Nodom提供的接口进行手动控制路由跳转：</p>
<ul>
<li><code>Router.go</code></li>
<li><code>Router.redirect</code></li>
</ul>
<p>示例：</p>
<p>首先创建<code>modules</code>文件夹，在<code>modules</code>文件夹下创建<code>route</code>文件夹，再创建<code>routemain.js</code>文件。作为路由渲染的主文件。</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">,</span>Router<span class="token punctuation">,</span>Util<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">RouteMain</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;a x-route="/router" class=&#123;&#123;page1?'colorimp':''&#125;&#125; acctive:'page1'>page1&lt;/a>
                &lt;div x-router>&lt;/div>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">page1</span><span class="token operator">:</span><span class="token boolean">true</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">onBeforeFirstRender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">let</span> hash <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            Router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
            Router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token string">'/router/route1/home'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>再创建<code>routeconfig.js</code>文件，再其中添加路由配置</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>createRoute<span class="token punctuation">,</span> Router<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>RouteDir<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./routedir.js"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    Router<span class="token punctuation">.</span>basePath <span class="token operator">=</span> <span class="token string">'/webroute'</span><span class="token punctuation">;</span>
    <span class="token function">createRoute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/router'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">module</span><span class="token operator">:</span> RouteDir<span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>再创建<code>routedir.js</code>文件</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">RouteDir</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div>
        &lt;p class='title'>路由用法例子&lt;/p>
        &lt;div style='background:#f0f0f0'>
            &lt;div style='border-bottom: 1px solid #999' test='router'>
                &lt;a x-repeat=&#123;&#123;routes&#125;&#125; x-route=&#123;&#123;path&#125;&#125;  class=&#123;&#123;active?'colorimp':''&#125;&#125; active='active' style='margin:10px'>&#123;&#123;title&#125;&#125;&lt;/a>
            &lt;/div>
            &lt;div x-router test='routerview'>&lt;/div>
        &lt;/div>
        &lt;/div>
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span><span class="token punctuation">&#123;</span>
            <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'路由用法1-基本用法'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/router/route1'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'路由用法2-路由参数用法'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/router/route2'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">false</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'路由用法3-路由嵌套用法'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/router/route3'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">false</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>最终创建html文件引入路由配置和主路由文件</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>route<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
        <span class="token selector">.colorimp</span> <span class="token punctuation">&#123;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>module<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nodom<span class="token punctuation">,</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../dist/nodom.esm.js'</span>
    <span class="token comment">// import &#123;MdlRouteMain&#125; from "../examples/modules/route/mdlroutemain.js";</span>
    <span class="token keyword">import</span> <span class="token punctuation">&#123;</span>RouteMain<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./modules/route/routemain.js"</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">&#123;</span>initRoute<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./modules/route/routeconfig.js"</span><span class="token punctuation">;</span>

    <span class="token function">nodom</span><span class="token punctuation">(</span>RouteMain<span class="token punctuation">,</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>

<p>初步路由配置基本完成</p>
<h5 id="路由嵌套"><a href="#路由嵌套" class="headerlink" title="路由嵌套"></a>路由嵌套</h5><p>创建<code>pmod1.js、pmod2.js、pmod3.js</code>文件分别如下</p>
<p><code>pmod1.js</code></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">,</span>Router<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PMod1</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class="result code1">
                &lt;div style="border-bottom: 1px solid #999">
                    &lt;a x-route="/route/route1/home" class=&#123;&#123;home?'colorimp':''&#125;&#125; active='home'>首页&lt;/a>
                    &lt;a x-route="/route/route1/list" class=&#123;&#123;list?'colorimp':''&#125;&#125; active='list'>列表&lt;/a>
                    &lt;a x-route="/route/route1/data" class=&#123;&#123;data?'colorimp':''&#125;&#125; active='data'>数据&lt;/a>
                &lt;/div>
                &lt;a x-route=&#123;&#123;route2&#125;&#125;>to router2&lt;/a>
                &lt;button e-click='redirect'>to router3&lt;/button>
                &lt;div x-router  test='1'>&lt;/div>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">home</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">list</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">onBeforeFirstRender</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
            model<span class="token punctuation">.</span>route2 <span class="token operator">=</span> <span class="token string">'/router/route2/rparam/home/1'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        Router<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span>
            <span class="token string">'/router/route3/r1/r2'</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>pmod2.js</code></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PMod2</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class="result code1">
                &lt;div style='border-bottom: 1px solid #999' test='route1'>
                    &lt;a x-repeat=&#123;&#123;routes&#125;&#125; x-route=&#123;&#123;path&#125;&#125; class=&#123;&#123;active?'colorimp':''&#125;&#125; active='active'  style='margin:10px'>&#123;&#123;title&#125;&#125;&lt;/a>
                &lt;/div>
                &lt;div x-router test='2'>&lt;/div>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'首页2'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/router/route2/rparam/home/1'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">useParentPath</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">active</span><span class="token operator">:</span><span class="token boolean">false</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'列表2'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/router/route2/rparam/list/2'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">useParentPath</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'数据2'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/router/route2/rparam/data/3'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">useParentPath</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>pmod3.js</code></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../../../dist/nodom.esm.js'</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PMod3</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class='result code1'>
            &lt;div style='border-bottom: 1px solid #999'>
                &lt;a x-route='/router/route3/r1/r2'>加载子路由r2&lt;/a>
            &lt;/div>
            &lt;div x-router test='3'>&lt;/div>
        &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>

    <span class="token function">onRender</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render'</span><span class="token punctuation">,</span>model<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在<code>routeconfig.js</code>文件中添加对应的路由二级跳转</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    Router<span class="token punctuation">.</span>basePath <span class="token operator">=</span> <span class="token string">'/webroute'</span><span class="token punctuation">;</span>
    <span class="token function">createRoute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/router'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">module</span><span class="token operator">:</span> RouteDir<span class="token punctuation">,</span>
        <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/route1'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">module</span><span class="token operator">:</span>PMod1<span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/route2'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">module</span><span class="token operator">:</span> PMod2<span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/route2'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">module</span><span class="token operator">:</span> PMod3<span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>完善路由功能</p>
<h5 id="使用路由传值、路由事件等功能"><a href="#使用路由传值、路由事件等功能" class="headerlink" title="使用路由传值、路由事件等功能"></a>使用路由传值、路由事件等功能</h5><p>分别创建<code>mod1、mod2、mod3、mod4、mod5、mod6、mod7、mod8.js</code>文件</p>
<p><code>mod1.js</code>文件</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Mod1</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                这是首页,路径是&#123;&#123;$route.path&#125;&#125;
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">onCompile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"compile"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>mod2.js</code>文件</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Mod2</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                这是商品列表页,路径是&#123;&#123;$route.path&#125;&#125;
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>mod3.js</code>文件</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Mod3</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                这是数据页,路径是&#123;&#123;$route.path&#125;&#125;
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>mod4.js</code>文件</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Mod4</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div test="1">
                这是&#123;&#123;$route.data.page&#125;&#125;页，编号是&#123;&#123;$route.data.id&#125;&#125;
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">onBeforeFirstRender</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>mod5.js</code>文件</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Mod5</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class="code1">
                路由r1加载的模块
                &lt;div x-router>&lt;/div>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>mod6.js</code>文件</p>
<p><code>request</code>发起请求取得<code>data1.json</code>中的文件</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">,</span>request<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Module61</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                &lt;p style="background-color: #f0f0f0">&#123;&#123;name&#125;&#125;,&#123;&#123;price&#125;&#125;&lt;/p>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Mod6</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    modules<span class="token operator">=</span><span class="token punctuation">[</span>Module61<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mod5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div>
                vip is:&#123;&#123;d1.vip&#125;&#125;
                &lt;Module61 x-repeat=&#123;&#123;d1.foods&#125;&#125; useDomModel>&lt;/Module61>
                &lt;ul>
                    &lt;li x-repeat=&#123;&#123;d1.foods&#125;&#125;>&#123;&#123;name&#125;&#125;,价格:&#123;&#123;price&#125;&#125;&lt;/li>
                &lt;/ul>
                &lt;input x-field='title'/>
                &lt;div>&#123;&#123;title&#125;&#125;&lt;/div>
            &lt;/div>
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">onBeforeFirstRender</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'/nodom3/examples/data/data1.json'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'json'</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
            model<span class="token punctuation">.</span>d1<span class="token operator">=</span>r<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>mod7.js</code>文件</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../../../dist/nodom.esm.js'</span>
<span class="token comment">/**
 * 路由主模块
 */</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Mod7</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token string">'&lt;span>这是商品详情页&lt;/span>'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>mod8.js文件</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../../../dist/nodom.esm.js'</span>
<span class="token comment">/**
 * 路由主模块
 */</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Mod8</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span> <span class="token punctuation">&#123;</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token string">'&lt;span>这是商品描述页&lt;/span>'</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>最后在routeconfig中配置路由项</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>createRoute<span class="token punctuation">,</span> Router<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../../../dist/nodom.esm.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>RouteDir<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./routedir.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>PMod1<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./pmod1.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>PMod2<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./pmod2.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>PMod3<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./pmod3.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Mod4<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./mod4.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Mod7<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./mod7.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Mod8<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./mod8.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Mod5<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./mod5.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Mod6<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"./mod6.js"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    Router<span class="token punctuation">.</span>basePath <span class="token operator">=</span> <span class="token string">'/webroute'</span><span class="token punctuation">;</span>
    <span class="token function">createRoute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/router'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">module</span><span class="token operator">:</span> RouteDir<span class="token punctuation">,</span>
        <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/route1'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">module</span><span class="token operator">:</span>PMod1<span class="token punctuation">,</span>
                <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
                    <span class="token function-variable function">module</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'/nodom3/try/modules/route/mod1.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/list'</span><span class="token punctuation">,</span>
                    <span class="token function-variable function">module</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'/nodom3/try/modules/route/mod2.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/data'</span><span class="token punctuation">,</span>
                    <span class="token function-variable function">module</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'/nodom3/try/modules/route/mod3.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token function-variable function">onLeave</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/route2'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">module</span><span class="token operator">:</span> PMod2<span class="token punctuation">,</span>
                <span class="token function-variable function">onEnter</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/rparam/:page/:id'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">module</span><span class="token operator">:</span>Mod4<span class="token punctuation">,</span>
                    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
                        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/decs'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">module</span><span class="token operator">:</span>Mod7<span class="token punctuation">,</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
                        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/comment'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">module</span><span class="token operator">:</span> Mod8<span class="token punctuation">,</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/route3'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">module</span><span class="token operator">:</span> PMod3<span class="token punctuation">,</span>
                <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'r1'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">module</span><span class="token operator">:</span>Mod5<span class="token punctuation">,</span>
                    <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
                        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/r2'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">module</span><span class="token operator">:</span> Mod6
                    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在<code>/route2</code>中的嵌套路由使用到路由传值功能<code>:page/:id</code></p>
<p>其中路由配置项中的<code>onLeave:function()&#123;&#125;、onEnter:function()&#123;&#125;</code>为单路由事件</p>
<h4 id="默认路由"><a href="#默认路由" class="headerlink" title="默认路由"></a>默认路由</h4><p>浏览器刷新时，会从服务器请求资源，nodom路由在服务器没有匹配的资源，则会返回404。通常的做法是: 在服务器拦截资源请求，如果确认为路由，则做特殊处理。<br>假设主应用所在页面是&#x2F;web&#x2F;index.html，当前路由对应路径为&#x2F;webroute&#x2F;member&#x2F;center。刷新时会自动跳转到&#x2F;member&#x2F;center路由。相应浏览器和服务器代码如下：</p>
<h5 id="浏览器代码"><a href="#浏览器代码" class="headerlink" title="浏览器代码"></a>浏览器代码</h5><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Router<span class="token punctuation">,</span>Module<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./nodom.esm.js'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Module</span><span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
    <span class="token comment">//在根模块中增加onFirstRender事件代码</span>
    <span class="token function-variable function">onFirstRender</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">let</span> path<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            path <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//默认home ，如果存在hash值，则把hash值作为路由进行跳转，否则跳转到默认路由</span>
        path <span class="token operator">=</span> path <span class="token operator">||</span> <span class="token string">'/home'</span><span class="token punctuation">;</span>
       Router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
   	<span class="token punctuation">&#125;</span>
	<span class="token operator">...</span>
<span class="token punctuation">&#125;</span>
</code></pre>

<h5 id="服务器代码"><a href="#服务器代码" class="headerlink" title="服务器代码"></a>服务器代码</h5><p>服务器代码为<a target="_blank" rel="noopener" href="http://www.nodom.cn/webroute/tutorial/www.noomi.cn">noomi框架</a>示例代码，其它如java、express做法相似。<br>如果Nodom路由以’&#x2F;webroute’开头,服务器拦截到请求后，分析资源路径开始地址是否以’&#x2F;webroute&#x2F;‘开头，如果是，则表示是nodom路由，直接执行重定向到应用首页，hash值设定为路由路径(去掉‘&#x2F;webroute’)。</p>
<pre class="language-js" data-language="js"><code class="language-js">@<span class="token function">Instance</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'routeFilter'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">RouteFilter</span><span class="token punctuation">&#123;</span>
    @<span class="token function">WebFilter</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">do</span><span class="token punctuation">(</span>request<span class="token operator">:</span>HttpRequest<span class="token punctuation">,</span><span class="token literal-property property">response</span><span class="token operator">:</span>HttpResponse<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> path <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>
        <span class="token comment">//拦截资源</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/webroute/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            response<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/web/index.html#'</span> <span class="token operator">+</span> path<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">export</span><span class="token punctuation">&#123;</span>RouteFilter<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre>

<h3 id="生态"><a href="#生态" class="headerlink" title="生态"></a>生态</h3><h4 id="NodomUI"><a href="#NodomUI" class="headerlink" title="NodomUI"></a>NodomUI</h4><h4 id="Kayaks"><a href="#Kayaks" class="headerlink" title="Kayaks"></a>Kayaks</h4><p>数据管理库，用于开发大型项目。</p>
<h4 id="Nodom-VsCode插件"><a href="#Nodom-VsCode插件" class="headerlink" title="Nodom VsCode插件"></a>Nodom VsCode插件</h4><p>提供模板代码高亮功能，以及其他多种辅助功能。</p>
</div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>Lanlan</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://archer-lan.github.io/2022/08/05/Nodom%E5%AD%A6%E4%B9%A0/" title="Nodom学习">https://archer-lan.github.io/2022/08/05/Nodom%E5%AD%A6%E4%B9%A0/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/08/05/Vuex%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" rel="prev" title="Vuex配置使用"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Vuex配置使用</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/07/21/Vue%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="next" title="Vue基础知识"><span class="post-nav-text">Vue基础知识</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>要不要和我说些什么？</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">苏ICP备xxxxxxxx号</a></div><div class="copyright"><span>&copy; 2019 – 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> Lanlan</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v6.0.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.7.0</span></div><div class="live_time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2019-02-14T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a><script>const date = new Date();
const today = (date.getMonth() + 1) + "-" + date.getDate()
const mourn_days = ["4-4","5-12"]
if (mourn_days.includes(today)) {
  document.documentElement.style.filter = "grayscale(1)";
}</script></div></body></html>